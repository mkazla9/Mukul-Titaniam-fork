trigger:
  branches:
    include:
    - master
  paths:
    include:
    - Deployment
    exclude:
      - ./

pool: Titaniam

variables:
  - group: Azure

stages:
- stage: Build
  displayName: Build Java project
  jobs:
  - job: Authentication
    displayName: Authenticate to Azure
    steps:
    - task: Bash@3
      inputs:
        targetType: 'inline'
        script: |
          az login --service-principal -u $(client_id) -p $(client_secret) --tenant $(tenant_id)
          
          export ARM_CLIENT_ID=$(client_id) 
          export ARM_CLIENT_SECRET=$(client_secret)
          export ARM_TENANT_ID=$(tenant_id)
          export ARM_SUBSCRIPTION_ID=$(subscription_id)